<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Our Honeymoon Through Eastern & Southern Africa</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
  html{-webkit-text-size-adjust:100%;overflow-x:hidden}
  body{font-family:'Nunito',sans-serif;background:#f7f3ee;color:#3a3530;overflow-x:hidden;-webkit-font-smoothing:antialiased}

  .hdr{text-align:center;padding:22px 16px 18px;background:linear-gradient(135deg,#4a6650,#5c7a5e 50%,#6d8c6f);color:#f7f3ee;position:relative}
  .hdr h1{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:600;letter-spacing:.01em}
  .hdr p{font-size:.82rem;opacity:.8;margin-top:3px;line-height:1.4}
  .hdr .hint{font-size:.72rem;opacity:.6;margin-top:6px;font-style:italic}

  .tabs{display:flex;overflow-x:auto;background:#fff;border-bottom:1px solid #e0dbd4;-webkit-overflow-scrolling:touch;scrollbar-width:none}
  .tabs::-webkit-scrollbar{display:none}
  .tab{flex-shrink:0;display:flex;align-items:center;gap:7px;padding:11px 16px;cursor:pointer;border:none;background:0 0;font-family:'Nunito',sans-serif;font-size:.78rem;font-weight:700;color:#7a7168;border-bottom:3px solid transparent;transition:all .2s;white-space:nowrap}
  .tab:hover{color:#3a3530;background:#faf8f5}
  .tab.on{border-bottom-color:var(--c);background:#f5f2ec;color:#3a3530}
  .dot{width:9px;height:9px;border-radius:50%;flex-shrink:0}
  .tab-sub{font-size:.62rem;text-transform:uppercase;letter-spacing:.07em;color:#a89e92;font-weight:600;margin-top:1px}

  .map-wrap{position:relative;width:100%;height:60vh;min-height:340px;max-height:600px}
  #map{width:100%;height:100%}

  /* Detail panel */
  .dp{position:absolute;top:8px;right:8px;width:280px;max-height:calc(100% - 16px);background:#fff;border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,.15);z-index:1000;overflow:hidden;transform:translateX(300px);transition:transform .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column}
  .dp.open{transform:translateX(0)}
  .dp-hd{padding:14px 16px 12px;color:#fff;position:relative}
  .dp-days{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;opacity:.85;font-weight:700}
  .dp-name{font-family:'Cormorant Garamond',serif;font-size:1.35rem;font-weight:600;line-height:1.2;margin-top:1px}
  .dp-x{position:absolute;top:10px;right:12px;background:rgba(255,255,255,.2);border:none;color:#fff;width:24px;height:24px;border-radius:50%;font-size:13px;cursor:pointer;display:flex;align-items:center;justify-content:center}
  .dp-x:hover{background:rgba(255,255,255,.35)}
  .dp-body{padding:0;overflow-y:auto;flex:1;-webkit-overflow-scrolling:touch}
  .dp-stop{padding:12px 16px;border-bottom:1px solid #f0ede7;cursor:pointer;transition:background .15s}
  .dp-stop:hover{background:#faf8f5}
  .dp-stop:last-child{border-bottom:none}
  .dp-sn{font-weight:700;font-size:.82rem;color:#3a3530;display:flex;align-items:center;gap:7px}
  .pn{width:18px;height:18px;border-radius:50%;color:#fff;font-size:.6rem;font-weight:800;display:flex;align-items:center;justify-content:center;flex-shrink:0}
  .dp-date{font-size:.68rem;color:#a89e92;padding-left:25px;margin-top:1px}
  .dp-desc{font-size:.78rem;color:#6b635a;line-height:1.5;padding-left:25px;margin-top:4px}

  /* Popups */
  .leaflet-popup-content-wrapper{border-radius:10px!important;box-shadow:0 4px 18px rgba(0,0,0,.16)!important;padding:0!important;overflow:hidden}
  .leaflet-popup-content{margin:0!important;min-width:180px}
  .leaflet-popup-tip{box-shadow:0 2px 8px rgba(0,0,0,.1)!important}
  .pp{font-family:'Nunito',sans-serif}
  .pp-hd{padding:10px 14px 8px;color:#fff}
  .pp-nm{font-family:'Cormorant Garamond',serif;font-size:1.05rem;font-weight:600}
  .pp-sub{font-size:.65rem;text-transform:uppercase;letter-spacing:.07em;opacity:.8;margin-top:1px}
  .pp-dt{font-size:.7rem;color:#8a8279;padding:6px 14px 2px;background:#fff;font-weight:600}
  .pp-ds{padding:4px 14px 12px;font-size:.78rem;color:#4a453f;line-height:1.45;background:#fff}

  /* Markers */
  .mk{width:26px;height:26px;border-radius:50% 50% 50% 4px;transform:rotate(-45deg);border:2.5px solid #fff;box-shadow:0 2px 6px rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:10px;color:#fff;font-family:'Nunito',sans-serif}
  .mk span{transform:rotate(45deg);display:block}

  /* Legend */
  .leg{position:absolute;bottom:24px;left:8px;background:rgba(255,255,255,.92);backdrop-filter:blur(6px);border-radius:8px;padding:8px 12px;box-shadow:0 2px 8px rgba(0,0,0,.1);z-index:1000;font-size:.68rem}
  .leg-t{font-weight:700;font-size:.62rem;text-transform:uppercase;letter-spacing:.06em;color:#7a7168;margin-bottom:4px}
  .leg-i{display:flex;align-items:center;gap:6px;padding:1.5px 0;color:#4a453f;cursor:pointer}
  .leg-i:hover{opacity:.7}
  .leg-d{width:8px;height:8px;border-radius:50%;flex-shrink:0;border:1.5px solid rgba(255,255,255,.8);box-shadow:0 1px 2px rgba(0,0,0,.12)}

  /* Map toggle */
  .map-tog{position:absolute;bottom:24px;right:8px;z-index:1000;background:rgba(255,255,255,.92);backdrop-filter:blur(6px);border:none;border-radius:8px;padding:7px 11px;box-shadow:0 2px 8px rgba(0,0,0,.12);cursor:pointer;font-family:'Nunito',sans-serif;font-size:.68rem;font-weight:700;color:#4a453f;display:flex;align-items:center;gap:5px;transition:background .15s}
  .map-tog:hover{background:#fff}
  .map-tog svg{width:14px;height:14px}

  .foot{text-align:center;padding:16px;font-size:.75rem;color:#8a8279;background:#f7f3ee;line-height:1.5}
  .foot span{color:#c06850}

  /* ── Mobile ── */
  @media(max-width:640px){
    .hdr h1{font-size:1.35rem}
    .hdr p{font-size:.78rem}
    .map-wrap{height:55vh;min-height:300px}
    .dp{width:calc(100% - 16px);right:8px;left:8px;max-height:50vh;bottom:8px;top:auto;transform:translateY(110%)}
    .dp.open{transform:translateY(0)}
    .tab{padding:10px 13px;font-size:.74rem;gap:6px}
    .leg{display:none}
    .leaflet-popup-content{min-width:160px}
  }
  @media(max-width:380px){
    .hdr{padding:18px 14px 14px}
    .hdr h1{font-size:1.05rem}
    .tab{padding:9px 11px;font-size:.7rem}
  }
</style>
</head>
<body>

<div class="hdr">
  <h1>Our Honeymoon Through Eastern & Southern Africa ✈︎</h1>
  <p>July 21 – Aug 16, 2025 · 27 days · 5 countries</p>
  <div class="hint">Tap the pins to see what we're up to at each stop!</div>
</div>

<div class="tabs" id="tabs"></div>

<div class="map-wrap">
  <div id="map"></div>
  <div class="dp" id="dp">
    <div class="dp-hd" id="dp-hd">
      <button class="dp-x" id="dp-x" aria-label="Close">✕</button>
      <div class="dp-days" id="dp-days"></div>
      <div class="dp-name" id="dp-name"></div>
    </div>
    <div class="dp-body" id="dp-body"></div>
  </div>
  <div class="leg" id="leg"></div>
  <button class="map-tog" id="map-tog" aria-label="Toggle satellite view"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg><span>Satellite</span></button>
</div>

<script>
const C=[
  {
    id:'rwanda',name:'Rwanda',days:'Jul 21–28',color:'#4285F4',
    stops:[
      {name:'Kigali',lat:-1.9440,lng:30.0619,dates:'Jul 21–22',desc:'Board overnight flight from Boston on Jul 21, land in Kigali the 22nd. Settle in and explore the city. We pass back through on the 28th for one more night before flying south.'},
      {name:'Umusambi Village',lat:-1.9844,lng:30.2100,dates:'Jul 23',desc:'Morning at the Rwanda Wildlife Conservation Association to see the Grey Crowned Cranes, then back to Kigali for the Genocide Memorial in the afternoon.'},
      {name:'Volcanoes National Park',lat:-1.4322,lng:29.5339,dates:'Jul 24–25',desc:'Early drive up to Musanze on the 24th. Morning hike into the forest to Dian Fossey\'s field camp and grave site. Golden monkey trek on the 25th, plus the Fossey Gorilla Museum.'},
    ]
  },
  {
    id:'uganda',name:'Uganda',days:'Jul 26–28',color:'#DB4437',
    stops:[
      {name:'Bwindi Impenetrable Forest',lat:-1.0438,lng:29.7773,dates:'Jul 26–28',desc:'Drive across the border on the 26th, first night at Ruhija Gorilla Lodge. Gorilla trek on the morning of the 27th (!!). Visit the local village that afternoon. Bird walk on the 28th before driving back to Kigali.'}
    ]
  },
  {
    id:'sa-jhb',name:'South Africa (Johannesburg)',days:'Jul 29–30',color:'#0F9D58',
    stops:[
      {name:'Johannesburg',lat:-26.2041,lng:28.0473,dates:'Jul 29–30',desc:'Fly from Kigali to Jo\'burg on the 29th. Apartheid Museum on the afternoon of the 30th, then on to Botswana.'}
    ]
  },
  {
    id:'botswana',name:'Botswana',days:'Jul 31 – Aug 7',color:'#AB47BC',
    stops:[
      {name:'Maun',lat:-19.9833,lng:23.4167,dates:'Jul 31',desc:'Fly from Johannesburg to Maun, then hop straight onto a bush plane into the Okavango Delta.'},
      {name:'Xaxaba Camp',lat:-19.5448,lng:22.9993,dates:'Jul 31 – Aug 2',desc:'Three nights deep in the Okavango Delta. Mokoro canoe rides, walking safaris, amazing birdlife. About as remote and wild as it gets.'},
      {name:'Savute',lat:-18.5657,lng:24.0631,dates:'Aug 3–5',desc:'Bush plane to the Savute marsh in Chobe. Three days out here, known for huge elephant herds and predator action on the open plains.'},
      {name:'Chobe (Kasane)',lat:-18.4577,lng:25.1498,dates:'Aug 6–7',desc:'Bush plane to Kasane. Sunset river safari on the Chobe on the 6th, then a full-day game drive on the 7th. Hippos, crocs, elephants, lions... all of it. Two nights at Two Rivers Lodge.'}
    ]
  },
  {
    id:'zimbabwe',name:'Zimbabwe',days:'Aug 8–10',color:'#F4B400',
    stops:[
      {name:'Victoria Falls',lat:-17.9243,lng:25.8572,dates:'Aug 8–10',desc:'Drive across the border on the 8th. Lunch at the Victoria Falls Hotel, elephant experience that afternoon. Tour of the falls on the 9th, crafts market, and potentially brave enough to white water raft the Zambezi. Fly to Cape Town on the 10th.'}
    ]
  },
  {
    id:'sa-cape',name:'South Africa (Cape Town)',days:'Aug 10–16',color:'#34A853',
    stops:[
      {name:'Cape Town',lat:-33.9249,lng:18.4241,dates:'Aug 10–13',desc:'Arrive the evening of the 10th. Table Mountain, Cape of Good Hope, penguins at Boulders Beach, Kirstenbosch Gardens. Four nights to finally slow down a little.'},
      {name:'Franschhoek',lat:-33.8734,lng:19.1170,dates:'Aug 14–16',desc:'Wine country to close out the trip. Two nights tasting our way through the valley, then to the airport on the 16th to fly home. Back to Massachusetts and moving to Tampa that same week!'}
    ]
  }
];

// Map
const map=L.map('map',{center:[-8,26],zoom:4,zoomControl:true,scrollWheelZoom:true,tap:true});
const tileVoyager=L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',{
  attribution:'© <a href="https://openstreetmap.org">OSM</a> © <a href="https://carto.com">CARTO</a>',
  subdomains:'abcd',maxZoom:18
});
const tileSat=L.layerGroup([
  L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',{maxZoom:18}),
  L.tileLayer('https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}',{maxZoom:18})
]);
tileVoyager.addTo(map);
let isSat=false;
const togBtn=document.getElementById('map-tog');
togBtn.addEventListener('click',()=>{
  if(isSat){map.removeLayer(tileSat);tileVoyager.addTo(map);togBtn.querySelector('span').textContent='Satellite';}
  else{map.removeLayer(tileVoyager);tileSat.addTo(map);togBtn.querySelector('span').textContent='Map';}
  isSat=!isSat;
});

// Route line
const coords=[];
C.forEach(c=>c.stops.forEach(s=>coords.push([s.lat,s.lng])));
L.polyline(coords,{color:'#3a5240',weight:3.5,opacity:.55,dashArray:'6,10',lineCap:'round'}).addTo(map);

// Markers
let pi=1;const M={};
C.forEach(c=>{
  c.stops.forEach(s=>{
    const n=pi++;
    const icon=L.divIcon({className:'',html:`<div class="mk" style="background:${c.color}"><span>${n}</span></div>`,iconSize:[26,26],iconAnchor:[4,26],popupAnchor:[10,-22]});
    const pop=`<div class="pp"><div class="pp-hd" style="background:${c.color}"><div class="pp-nm">${s.name}</div><div class="pp-sub">${c.name}</div></div><div class="pp-dt">${s.dates}</div><div class="pp-ds">${s.desc}</div></div>`;
    const mk=L.marker([s.lat,s.lng],{icon}).addTo(map).bindPopup(pop,{maxWidth:240,closeButton:true});
    M[`${c.id}-${s.name}`]={mk,c,s,n};
  });
});

// Tabs
const bar=document.getElementById('tabs');
C.forEach(c=>{
  const t=document.createElement('button');
  t.className='tab';t.dataset.id=c.id;t.style.setProperty('--c',c.color);
  t.innerHTML=`<div class="dot" style="background:${c.color}"></div><div><div>${c.name}</div><div class="tab-sub">${c.days}</div></div>`;
  t.addEventListener('click',()=>openC(c.id));
  bar.appendChild(t);
});

function openC(id){
  const c=C.find(x=>x.id===id);if(!c)return;
  const b=L.latLngBounds(c.stops.map(s=>[s.lat,s.lng]));
  map.flyToBounds(b.pad(0.5),{duration:.8,maxZoom:10});
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));
  document.querySelector(`.tab[data-id="${id}"]`).classList.add('on');
  showDP(c);
}

// Detail panel
const dp=document.getElementById('dp');
function showDP(c){
  document.getElementById('dp-hd').style.background=c.color;
  document.getElementById('dp-days').textContent=c.days;
  document.getElementById('dp-name').textContent=c.name;
  let sn=1;for(const x of C){if(x.id===c.id)break;sn+=x.stops.length;}
  let h='';
  c.stops.forEach((s,i)=>{
    h+=`<div class="dp-stop" data-k="${c.id}-${s.name}"><div class="dp-sn"><div class="pn" style="background:${c.color}">${sn+i}</div>${s.name}</div><div class="dp-date">${s.dates}</div><div class="dp-desc">${s.desc}</div></div>`;
  });
  document.getElementById('dp-body').innerHTML=h;
  dp.classList.add('open');
  document.getElementById('dp-body').querySelectorAll('.dp-stop').forEach(el=>{
    el.addEventListener('click',()=>{
      const e=M[el.dataset.k];
      if(e){map.flyTo([e.s.lat,e.s.lng],12,{duration:.6});e.mk.openPopup();}
    });
  });
}

document.getElementById('dp-x').addEventListener('click',()=>{
  dp.classList.remove('open');
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));
});

map.on('click',()=>{
  dp.classList.remove('open');
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));
});

map.on('popupopen',e=>{
  const ll=e.popup._latlng;
  for(const k in M){
    const{s,c}=M[k];
    if(Math.abs(s.lat-ll.lat)<.01&&Math.abs(s.lng-ll.lng)<.01){
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));
      const t=document.querySelector(`.tab[data-id="${c.id}"]`);
      if(t)t.classList.add('on');
      break;
    }
  }
});

// Legend
const leg=document.getElementById('leg');
let lh='<div class="leg-t">Countries</div>';
C.forEach(c=>{lh+=`<div class="leg-i" onclick="openC('${c.id}')"><div class="leg-d" style="background:${c.color}"></div>${c.name}</div>`;});
leg.innerHTML=lh;
</script>
</body>
</html>
